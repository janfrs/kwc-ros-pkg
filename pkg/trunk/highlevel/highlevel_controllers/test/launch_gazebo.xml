
<launch>
  <master auto="start"/>
  <group name="wg">


    <!-- create model file for gazebo and launch gazebo -->
    <node pkg="gazebo_robot_description" type="urdf2gazebo" args="$(find wg_robot_description)/pr2/pr2.xml $(find gazebo_robot_description)/world/pr2_xml.model" />
    <param name="robotdesc/pr2" command="$(find wg_robot_description_parser)/merge &quot;$(find wg_robot_description)/pr2/pr2.xml&quot;" />
    <node pkg="gazebo" type="gazebo" args="-n $(find gazebo_robot_description)/world/robot_floorobj.world" respawn="false" output="screen">
      <env name="LD_LIBRARY_PATH" value="$(find gazebo_plugin)/lib:$(find gazebo)/gazebo/lib:$(find Cg)/Cg/lib:$LD_LIBRARY_PATH" />
      <env name="GAZEBO_RESOURCE_PATH" value="$(find gazebo_robot_description)/world" />
      <env name="OGRE_RESOURCE_PATH" value="$(find ogre)/ogre/lib/OGRE" />
      <env name="MC_RESOURCE_PATH" value="$(find gazebo_robot_description)/world" />
    </node>

    <!-- use mech.py to spawn all controllers listed in controllers.xml -->
    <!-- start tilting Hokuyo laser by sending it a preset code of 46, this means sawtooth profile sweep.
         for details of the profile, rates, see controller::LaserScannerControllerNode. -->
    <include file="$(find pr2_gazebo)/pr2_default_controllers.launch" />



    <node pkg="map_server" type="map_server" args="$(find gazebo_robot_description)/world/Media/materials/textures/map3.png 0.1" respawn="false" />
    <remap from="base_pose_gazebo_ground_truth" to="base_pose_ground_truth"/> 
    <param name="max_publish_frequency" value="20.0"/>
    <node pkg="fake_localization" type="fake_localization" respawn="false" />


    <!--include file="$(find highlevel_controllers)/test/launch_world_3d_map.xml"/-->

    <!-- Load parameters for moving the base. -->
    <param name="costmap_2d/inflation_radius" type="double" value="0.35" />

    <node pkg="nav_view" type="nav_view" args="odom:=localizedpose" respawn="false"/>

    <!-- Now launch controller node required -->
    <include file="$(find highlevel_controllers)/test/launch_move_base.xml"/>
  </group>
</launch>

